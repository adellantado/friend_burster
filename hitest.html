<!DOCTYPE html>
<html>
<head>

    <script src="src/createjs/events/EventDispatcher.js"></script>
    <script src="src/createjs/events/Event.js"></script>

    <script src="src/easeljs/events/MouseEvent.js"></script>
    <script src="src/easeljs/geom/Point.js"></script>
    <script src="src/easeljs/geom/Matrix2D.js"></script>
    <script src="src/easeljs/geom/Rectangle.js"></script>
    <script src="src/easeljs/utils/UID.js"></script>
    <script src="src/easeljs/utils/Ticker.js"></script>
    <script src="src/easeljs/display/DisplayObject.js"></script>
    <script src="src/easeljs/display/Container.js"></script>
    <script src="src/easeljs/display/Stage.js"></script>
    <script src="src/easeljs/display/Graphics.js"></script>
    <script src="src/easeljs/display/Shape.js"></script>
    <script src="src/easeljs/display/Text.js"></script>
    <script src="src/easeljs/display/Bitmap.js"></script>
    <script src="src/easeljs/display/SpriteSheet.js"></script>
    <script src="src/easeljs/display/Sprite.js"></script>

    <script src="src/createjs/utils/IndexOf.js"></script>
    <script src="src/createjs/utils/Proxy.js"></script>

    <script src="src/preloadjs/AbstractLoader.js"></script>
    <script src="src/preloadjs/XHRLoader.js"></script>
    <script src="src/preloadjs/LoadQueue.js"></script>

    <script src="src/game/AssetManager.js"></script>
    <script src="src/game/BalloonFactory.js"></script>

    <script src="src/game/utils/EventDispatcherUtil.js"></script>


</head>
<body onload="init();">

<script type="text/javascript">

    var balloonManager;
    var stage;

    var balloon;
    var balloonBitmap;

    function init() {
        var canvas = document.getElementById('canvas');
        stage = new createjs.Stage(canvas);

        balloonManager = new BalloonFactory(1);
        delay();
    }

    function delay() {
        setTimeout(start, 1000);
    }

    function start() {
        balloon = initBalloon();
        balloon.scaleX = balloon.scaleY = 1/2;
        balloon.x = (stage.width - balloon.width) / 2;
        balloon.y = (stage.height - balloon.height) / 2;

    }

    function onClick(e) {
//        console.log("hitTest:", stage.hitTest(stage.mouseX, stage.mouseY));

        console.log("x y:", stage.mouseX, stage.mouseY);
        console.log("hitTest:", balloon.getChildAt(0).hitTest(stage.mouseX, stage.mouseY));
    }

    function initBalloon() {

        var balloonContainer = new createjs.Container();
        var balloon = balloonManager.getRandomBalloon(1);
        balloonBitmap = new createjs.Bitmap(balloon.asset);
        balloonContainer.addChild(balloonBitmap);

        stage.addChild(balloonContainer);
        stage.update();

        return balloonContainer;
    }

</script>

<div id="main" class="canvasHolder">
    <canvas id="canvas" width="600" height="530" onclick="onClick(event)"></canvas>
</div>

</body>
</html>
